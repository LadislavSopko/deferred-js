(function(a){function c(d,e){return function(){return d.apply(e,arguments)}}function b(d){this.doneFuncs=[];this.failFuncs=[];this.resultArgs=null;this.status="";if(d){d.apply(this,[this])}}b.prototype.isResolved=function(){return this.status==="rs"};b.prototype.isRejected=function(){return this.status==="rj"};b.prototype.promise=function(){var d=this,e=(arguments.length<1)?{}:arguments[0];e.then=c(d.then,d);e.done=c(d.done,d);e.fail=c(d.fail,d);e.always=c(d.always,d);e.isResolved=c(d.isResolved,d);e.isRejected=c(d.isRejected,d);return e};b.prototype.reject=function(){return this.rejectWith(this,arguments)};b.prototype.resolve=function(){return this.resolveWith(this,arguments)};b.prototype.exec=function(g,h,e,d){if(this.status!==""){return this}this.status=d;for(var f=0;f<h.length;f++){h[f].apply(g,e)}return this};b.prototype.resolveWith=function(e){var d=this.resultArgs=(arguments.length>1)?arguments[1]:[];return this.exec(e,this.doneFuncs,d,"rs")};b.prototype.rejectWith=function(e){var d=this.resultArgs=(arguments.length>1)?arguments[1]:[];return this.exec(e,this.failFuncs,d,"rj")};b.prototype.done=function(){for(var f=0;f<arguments.length;f++){if(!arguments[f]){continue}if(arguments[f].constructor===Array){var d=arguments[f];for(var e=0;e<d.length;e++){if(this.status==="rs"){d[e].apply(this,this.resultArgs)}this.doneFuncs.push(d[e])}}else{if(this.status==="rs"){arguments[f].apply(this,this.resultArgs)}this.doneFuncs.push(arguments[f])}}return this};b.prototype.fail=function(g){for(var f=0;f<arguments.length;f++){if(!arguments[f]){continue}if(arguments[f].constructor===Array){var d=arguments[f];for(var e=0;e<d.length;e++){if(this.status==="rj"){d[e].apply(this,this.resultArgs)}this.failFuncs.push(d[e])}}else{if(this.status==="rj"){arguments[f].apply(this,this.resultArgs)}this.failFuncs.push(arguments[f])}}return this};b.prototype.always=function(){if(arguments.length>0&&arguments[0]){this.done(arguments[0]);this.fail(arguments[0])}return this};b.prototype.then=function(){if(arguments.length>1&&arguments[1]){this.fail(arguments[1])}if(arguments.length>0&&arguments[0]){this.done(arguments[0])}return this};a.Deferred=b})(window);